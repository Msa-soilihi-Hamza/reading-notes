<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{ title ?? 'Reading Notes' }}</title>
  @vite(['resources/css/app.css', 'resources/js/app.js'])
</head>
<body>
  <nav class="navbar">
    <div class="navbar-inner">
      <a href="/" class="navbar-brand">Reading Notes</a>
      <div class="navbar-links">
        @if(auth.isAuthenticated)
          <a href="/books" class="nav-link">Recettes</a>
          <a href="/my-recipes" class="nav-link">Mes recettes</a>
          @if(auth.user.role === 'admin')
            <a href="/admin/users" class="nav-link">Utilisateurs</a>
            <a href="/admin/books" class="nav-link">Gerer recettes</a>
          @end
          <a href="/profile" class="nav-link">{{ auth.user.fullName ?? auth.user.email }}</a>
          <form action="/logout" method="POST">
            {{ csrfField() }}
            <button type="submit" class="btn-logout">Deconnexion</button>
          </form>
        @else
          <a href="/login" class="link-login">Connexion</a>
          <a href="/register" class="btn-register-nav">Inscription</a>
        @end
      </div>
    </div>
  </nav>

  <main class="main-content">
    @if(flashMessages.has('success'))
      <div class="flash-success">
        {{ flashMessages.get('success') }}
      </div>
    @end

    @if(flashMessages.has('errors'))
      <div class="flash-error">
        {{ flashMessages.get('errors') }}
      </div>
    @end

    {{{ await $slots.main() }}}
  </main>
</body>
</html>
